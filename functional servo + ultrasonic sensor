
import RPi.GPIO as GPIO
import time


GPIO.setmode(GPIO.BOARD)
 
RTriggerP  = 13
REchoP     = 15
FTriggerP  = 16
FEchoP     = 18
 

GPIO.setup(RTriggerP, GPIO.OUT)
GPIO.setup(REchoP, GPIO.IN)
GPIO.setup(FTriggerP, GPIO.OUT)
GPIO.setup(FEchoP, GPIO.IN)


GPIO.output(RTriggerP, False)
time.sleep(2)
GPIO.output(FTriggerP, False)
time.sleep(2)



def distance(trig, echo):
    GPIO.output(trig, True)
    time.sleep(0.00001)
    GPIO.output(trig, False)
    
    valid = True
    RefTime = time.time()
    StartTime = RefTime
    while (GPIO.input(echo) == 0) and (StartTime-RefTime < 0.1):
        StartTime = time.time()
    if (StartTime-RefTime >= 0.1):
        valid = False
 
    if (valid):
        RefTime = time.time()
        StopTime = time.time()
        while (GPIO.input(echo) == 1) and (StopTime-RefTime < 0.1):
            StopTime = time.time()
        if (StopTime-RefTime >= 0.1):
            valid = False
  
    if (valid):
        EchoPulseLength = StopTime - StartTime
        return (EchoPulseLength * 34300) / 2
    else:
        return -1



if __name__ == '__main__':
    try:
        
       
        while True:

            Fdist = distance(FTriggerP, FEchoP)
            
            print("Measured Distance = {0} cm".format(Fdist))

            time.sleep(0.5)

            Rdist = distance(RTriggerP, REchoP)
            
            print("Measured 2nd Distance = {0} cm".format(Rdist))

            time.sleep(0.5)

    except KeyboardInterrupt:
        print("Measurement stopped by User")
        GPIO.cleanup()
